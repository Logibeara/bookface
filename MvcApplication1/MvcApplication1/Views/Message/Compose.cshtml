
@{
    Layout = null;
    ViewBag.Title = "Message";
}

<script>

    /* unhide popup and populate it with compose form */
    var cancel = function () {
        //unhide popup div
        $('#overlay_parent').css('visibility', 'hidden');
    }

    var send = function ()
    {
        //send message
        //call funciton to grab html
        
        $.post('@Html.Raw(@Url.Action("Send", "Message", new { recipient = 999,sender = 999,  subject = "test", message = "testmessage" }))', null, function (result) {
            $('#send_status').html(result);
        });
    }

    /* attach a submit handler to the form*/ 
    $("#messageForm").submit(function (event) {

        /*stop form from submitting normally*/
        event.preventDefault();

        var formData = $(this).serialize();
        
       
        /*get some values from elements on the page: */
        var $form = $(this),
            url = $form.attr('action');

        /*send the data using post */
        var posting = $.post(url, formData);

        /*put the results in a div */
        posting.done(function (data) {
            $("#send_status").empty().append(data);
        });

    });

</script>


<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Compose</title>
</head>
<body>
    <div>
        <table>
        <tbody>
        <!-- tr > to: //Html.LabelFor(m => m.Sender)</!-->
        <tr>
        <td>

        <form method="post" id="messageForm" action='@Url.Action("Send", "Message")'>
        <table>
        <tbody>
        <tr><td>Send To:</td><td><textarea id="recipient" name="recipient" rows="1" cols="65"> test</textarea></td></tr>
        <tr><td>From:</td><td><textarea id="sender" name="sender" rows="1" cols="65" ></textarea></td></tr>
        <tr><td>Subject:</td><td><textarea id="subject" name="subject" rows="1" cols="65"></textarea></td></tr>
        <tr><td>Message:</td> </tr>
        </tbody>
        </table>
        <textarea rows="16" cols="73" id="message" name="message"/>
        <br/>
            
        <p id ="send_status"></p>
        <input type="submit" value="Send" id="sendButton" />
        <input type="button" value="Cancel" id="cancelButton" onclick="cancel()"/>
        </form>
        </tbody>
        </table>
    </div>
</body>
</html>

